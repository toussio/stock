<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ì‘ë‘ íˆ¬ì ì„¼í„°</title>

  <!-- ====== ìŠ¤íƒ€ì¼ ====== -->
  <style>
    :root {
      --bg:#0f172a; --card:#1f2937; --ink:#e5e7eb; --ink2:#cbd5e1;
      --accent:#334155; --accentH:#475569; --danger:#7f1d1d; --ok:#065f46;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0; padding: 20px;
      font-family: Arial, sans-serif;
      background: var(--bg); color: var(--ink);
      overflow-x: hidden;
    }

    h1 { text-align:center; margin:4px 0 16px; }

    /* ê³µí†µ ì¹´ë“œí˜• */
    .req-card {
      background: var(--card);
      border-radius: 10px;
      padding: 12px;
      margin: 8px 0;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }

    /* ëª¨ë‹¬ ê¸°ë³¸ */
    .modal { position:fixed; inset:0; background:rgba(0,0,0,0.5);
      display:none; align-items:center; justify-content:center; z-index:99; }
    .modal-content { background:var(--card); padding:20px; border-radius:12px; max-height:90vh; overflow:auto; }

    /* ì¶œì„, í™˜ì „ ë“± */
    .attendance-day {
      display:inline-flex; align-items:center; justify-content:center;
      width:50px; height:50px; margin:4px; border-radius:8px;
      background:var(--accent); cursor:pointer; transition:.2s;
    }
    .attendance-day.checked { background:var(--ok); }
    .attendance-day:hover { background:var(--accentH); }

    /* ì±„íŒ…ì°½ */
    #chatBox {
      position:fixed; bottom:20px; right:20px;
      width:360px; height:480px;
      display:flex; flex-direction:column;
      background:var(--card); border-radius:12px;
      box-shadow:0 6px 16px rgba(0,0,0,0.4);
      overflow:hidden; resize:none; z-index:98;
    }
    #chatHeader {
      display:flex; justify-content:space-between; align-items:center;
      padding:8px 12px; background:var(--accent);
      border-bottom:1px solid #475569;
      cursor:grab; font-weight:bold;
    }
    #chatMessages {
      flex:1; overflow-y:auto; padding:8px;
    }
    #chatInputWrap {
      display:flex; border-top:1px solid #475569;
    }
    #chatInput {
      flex:1; padding:8px; background:transparent;
      color:var(--ink); border:none; outline:none;
    }
    #chatInputWrap button {
      background:var(--accent); color:var(--ink);
      border:none; padding:8px 12px; cursor:pointer;
    }
    #chatResizer {
      height:6px; background:#475569; cursor:ns-resize;
    }
    .chat-right .chat-msg { background:#334155; margin:4px 0; padding:6px 8px; border-radius:8px; text-align:right; }
    .chat-left .chat-msg  { background:#1e293b; margin:4px 0; padding:6px 8px; border-radius:8px; text-align:left; }
    .chat-meta { font-size:11px; color:#9ca3af; margin-top:2px; }

    /* ë²„íŠ¼ */
    button {
      background:var(--accent); color:var(--ink);
      border:none; border-radius:6px; padding:6px 10px;
      cursor:pointer; transition:.2s;
    }
    button:hover { background:var(--accentH); }

    #modeToggleBtn {
      position:fixed; top:20px; right:20px;
      background:#475569; border-radius:20px;
      padding:10px 16px; font-weight:bold;
      z-index:100;
    }
  </style>

  <!-- ====== Firebase SDK ====== -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js"></script>
</head>

<body>
  <h1>ğŸ“ˆ ì‘ë‘ íˆ¬ì ì„¼í„°</h1>

  <!-- ====== ìœ ì € ì •ë³´ ì˜ì—­ ====== -->
  <section id="userRow">
    <div id="userInfo">ë¡œê·¸ì¸ í•„ìš”</div>
    <button id="logoutBtn" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
  </section>

  <!-- ====== ë¡œê·¸ì¸ ëª¨ë‹¬ ====== -->
  <div class="modal" id="loginModal">
    <div class="modal-content">
      <h2>ğŸ” ë¡œê·¸ì¸</h2>
      <input type="text" id="customId" placeholder="ê³ ìœ ë²ˆí˜¸" /><br><br>
      <input type="text" id="customName" placeholder="ì´ë¦„" /><br><br>
      <button id="loginBtn">ë¡œê·¸ì¸</button>
    </div>
  </div>

  <!-- ====== í™˜ì „ ëª¨ë‹¬ ====== -->
  <div class="modal" id="exchangeModal">
    <div class="modal-content">
      <h2>ğŸ’± RWW â†’ COIN í™˜ì „</h2>
      <input type="number" id="exchangeAmount" placeholder="ê¸ˆì•¡ ì…ë ¥" />
      <button onclick="exchangeCashToCoin()">í™˜ì „</button>
      <button onclick="closeExchangeModal()">ë‹«ê¸°</button>
    </div>
  </div>

  <!-- ====== ì¶œì„ì²´í¬ ëª¨ë‹¬ ====== -->
  <div class="modal" id="attendanceModal">
    <div class="modal-content">
      <h2>ğŸ“… ì¶œì„ì²´í¬</h2>
      <div id="attendanceGrid" style="display:flex;flex-wrap:wrap;max-width:400px;"></div>
      <button onclick="closeAttendanceModal()">ë‹«ê¸°</button>
    </div>
  </div>

  <!-- ====== ê´€ë¦¬ì íŒ¨ë„ (ê¸°ë³¸ ìˆ¨ê¹€) ====== -->
  <div class="modal" id="adminPanelAll">
    <div class="modal-content" id="adminPanelHeaderSticky">
      <h2>ğŸ›¡ï¸ ê´€ë¦¬ì íŒ¨ë„</h2>
      <div id="adminSummary"></div>
      <div id="userList"></div>
    </div>
  </div>

  <!-- ====== ì‹¤ì‹œê°„ ì±„íŒ…ì°½ ====== -->
  <div id="chatBox">
    <div id="chatHeader">
      <span>ğŸ’¬ ì‹¤ì‹œê°„ ì±„íŒ…</span>
      <button id="chatToggleBtn" title="ìˆ¨ê¸°ê¸°/í¼ì¹˜ê¸°">â€”</button>
    </div>
    <div id="chatMessages"></div>
    <div id="chatInputWrap">
      <input type="text" id="chatInput" placeholder="ë©”ì‹œì§€ ì…ë ¥...(Enter ì „ì†¡, Shift+Enter ì¤„ë°”ê¿ˆ)">
      <button onclick="sendChat()">ì „ì†¡</button>
    </div>
    <div id="chatResizer" title="ë“œë˜ê·¸í•´ì„œ ì±„íŒ…ì°½ ë†’ì´ ì¡°ì ˆ"></div>
  </div>

  <!-- ====== ëª¨ë“œ ì „í™˜ ë²„íŠ¼ ====== -->
  <button id="modeToggleBtn" onclick="toggleMode()">ğŸ” ì£¼ì‹ â‡„ ì½”ì¸</button>

  <!-- ====== ìŠ¤í¬ë¦½íŠ¸ ë¶„í•  ë¡œë“œ ====== -->
  <script src="js/app.js"></script>
  <script src="js/admin.js"></script>
  <script src="js/attendance.js"></script>
  <script src="js/exchange.js"></script>
  <script src="js/chat.js"></script>

  <!-- í–¥í›„ ì¶”ê°€ -->
  <!-- <script src="js/finance.js"></script> -->
  <!-- <script src="js/market.js"></script> -->
  <!-- <script src="js/news.js"></script> -->
  <!-- <script src="js/ui.js"></script> -->
</body>
</html>
